/*
 * JumpSlides.JS
 * version 1.0.0
 * author: Yixin Xia
 */
(function(e){e.fn.populateShowcase=function(t){var n=this;var r={countImages:function(t){var n=0;e.each(t,function(t,r){e.each(r.pics,function(){n++})});return n},measureContDivWidth:function(){var n=0;var r=0;e.each(t.col,function(i,s){if(t.col[i].active){r++;var o=0;e.each(s.pics,function(e,n){if(t.col[i].pics[e].width>o){o=t.col[i].pics[e].width}});n+=o}});return{contWidth:n+t.horzMargin*(r-1),totalCol:r}},checkMobile:function(){return e(window).width()<=t.mobileResWidth},returnImgURL:function(e){return t.picInfo.picDir+t.picInfo.picList[e]},isItOdd:function(e){return e%2!=0}};var i={loadImages:function(){var n;var i=0;var u;var a;if(r.checkMobile()){u=t.mobileCol;a=s;n=r.countImages(u)}else{u=t.col;a=o;n=r.countImages(u)}e.each(u,function(t,s){var o=t;u[t].active=true;e.each(s.pics,function(e,t){var s=new Image;var f=r.returnImgURL(u[o].pics[e].name);s.name=f;s.onload=function(){i++;t["width"]=this.width;t["height"]=this.height;if(i===n){a.afterLoadCallback()}};s.src=f;t["img"]=s})})}};var s={afterLoadCallback:function(){e(n).addClass("galleryMobile");var r=0;e.each(t.mobileCol,function(i,s){n.append('<div class="col'+i+'"></div>');var o=0;var u=0;e.each(s.pics,function(r,s){e(n["selector"]+" .col"+i).append(t.mobileCol[i].pics[r].img);o+=t.mobileCol[i].pics[r].height;if(t.mobileCol[i].pics[r].width>u){u=t.mobileCol[i].pics[r].width}});s["colMaxWidth"]=u;r+=u;s["colHeight"]=o});t.mobileContMaxWidthNoMargin=r*t.mobileImgReduce;t.mobileContMaxWidthWithMargin=r*t.mobileImgReduce+t.horzMargin*(t.mobileCol.length-1);this.formatContainer()},formatContainer:function(){var r=t.mobileContMaxWidthWithMargin;e(n["selector"]).css({overflow:"hidden",position:"relative",margin:"0 auto",width:r+"px",height:t.mobileContainerHeight+"px"});e(n["selector"]+">div").css({position:"absolute","margin-right":t.horzMargin+"px"});e(n["selector"]+">div:last-child").css({"margin-right":"0"});this.formatCol()},formatCol:function(){e.each(e(n["selector"]+">div"),function(n,i){e.each(e(i)[0].children,function(r,i){e(i).css({"margin-bottom":t.mobileCol[n].vertMargin,border:t.imgBorder,width:t.mobileCol[n].pics[r].width*t.mobileImgReduce+"px",height:t.mobileCol[n].pics[r].height*t.mobileImgReduce+"px"})});var s=t.mobileCol[n].colMaxWidth*t.mobileImgReduce*n+t.mobileHorzMargin*n;var o;if(r.isItOdd(n+1)){o=0}else{o=-(t.mobileCol[n].colHeight*t.mobileImgReduce-t.mobileContainerHeight)}e(i).css({width:t.mobileCol[n].colMaxWidth*t.mobileImgReduce,height:t.mobileCol[n].colHeight*t.mobileImgReduce,left:s,bottom:o+"px"})});this.colSlideEffect()},colSlideEffect:function(){var i,s=0;var o;e(window).scroll(function(){s=e(window).scrollTop();if(s>i){o=Number(t.mobileImgScrollRate)}else{o=Number(-t.mobileImgScrollRate)}i=s;e.each(e(n["selector"]+">div"),function(t,n){var i=r.isItOdd(t+1);var s=Number(e(n).css("bottom").replace(/[^-\d\.]/g,""));if(i){console.log("ODD:"+s);e(n).css({bottom:s-o})}else{console.log("EVEN:"+s);e(n).css({bottom:s+o})}})})}};var o={afterLoadCallback:function(){e(n).addClass("galleryNotMobile");var r=0;e.each(t.col,function(i,s){n.append('<div class="col'+i+'"></div>');var o=0;var u=0;e.each(s.pics,function(r,s){e(n["selector"]+" .col"+i).append(t.col[i].pics[r].img);o+=t.col[i].pics[r].height;if(t.col[i].pics[r].width>u){u=t.col[i].pics[r].width}});s["colMaxWidth"]=u;r+=u;s["colHeight"]=o;s["animated"]=false});t.contMaxWidthNoMargin=r;t.contMaxWidthWithMargin=r+t.horzMargin*(t.col.length-1);this.formatContainer()},formatContainer:function(){var r=t.contMaxWidthWithMargin;e(n["selector"]).css({overflow:"hidden",position:"relative",margin:"0 auto",width:r+"px",height:t.containerHeight+"px"});e(n["selector"]+">div").css({position:"absolute",bottom:"0","margin-right":t.horzMargin+"px"});e(n["selector"]+">div:last-child").css({"margin-right":"0"});this.resizeFunc.onResizeInit();this.onResize();this.formatCol()},onResize:function(){var t=this;e(window).resize(function(){t.resizeFunc.onResizeInit()})},resizeFunc:{alignCenter:function(t){var i=r.measureContDivWidth();var s=i["contWidth"]-t;if(s>0){e(n).css({left:"-"+s/2+"px"})}else{e(n).css({left:"0px"})}},responsiveHide:function(r){var i=0;e.each(e(n["selector"]+">div"),function(n,s){if(t.col[n].responsiveHideLessThan>=r){e(s).css({display:"none"});t.col[n].active=false}else{t.col[n].active=true;var o=t.col[n].colMaxWidth*i+t.horzMargin*i;e(s).css({display:"block",left:o+"px"});i++;var u=t.col[n].animationYOffset;if(t.col[n].animated){e(s).css({bottom:"-"+u+"px"})}}})},onResizeInit:function(){var t=e(window).width();this.responsiveHide(t);this.alignCenter(t)}},formatCol:function(){e.each(e(n["selector"]+">div"),function(n,r){e.each(e(r)[0].children,function(r,i){e(i).css({"margin-bottom":t.col[n].vertMargin+"px",border:t.imgBorder})});e(r).css({bottom:"-"+(t.col[n].colHeight+t.col[n].vertMargin*t.col[n].pics.length)+"px",width:t.col[n].colMaxWidth+"px"})});this.animateBars()},animateBars:function(){e.each(e(n["selector"]+">div"),function(r,i){var s=t.col[r].animationTimer;var u=t.col[r].bounceTimer;var a=t.col[r].bounceAttempts;var f=t.col[r].bounceDistance;var l=t.col[r].animationDelay;var c=t.col[r].colHeight;var h=t.col[r].animationYOffset;var p=t.col[r].animationTimeFunc;var d=false;if(u>0||a>0||f>0){var d=true}e(n).waypoint(function(){if(t.col[r].animated===false&&t.col[r].active===true){o.bounceEffect.bounceUp(e(i),c,s,d,u,a,l,h,p,f)}t.col[r].animated=true},{offset:t.wpYOffset})})},bounceEffect:{bounceUp:function(t,n,r,i,s,o,u,a,f,l){e(t).delay(u).animate({bottom:"+="+(n-a)},{duration:r,specialEasing:{bottom:f},complete:function(){if(i){e(t).effect("bounce",{distance:l,times:o},s)}}})}}};(function(){i.loadImages()})()}})(jQuery)